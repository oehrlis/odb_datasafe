# OraDBA Data Safe Extension v0.11.1

**Release Date:** 2026-02-16

## Overview

Version 0.11.1 is a focused bugfix release for connector update compartment
resolution and shell compatibility in the standalone environment helper.

## Highlights

- **Connector update fix** for `--datasafe-home` when connector metadata uses a name.
- **Compartment override support** allowing `--datasafe-home` with `--compartment`.
- **Updated compartment fallback priority** with `DS_ROOT_COMP` preferred over
  `DS_CONNECTOR_COMP`.
- **Shell compatibility fix** in `datasafe_env.sh` for both `bash` and `ksh` sourcing.

## Details

### Fixed

- `bin/datasafe_env.sh` now supports sourcing from both `bash` and `ksh` by:
  - using shell-compatible script-path detection (`BASH_SOURCE[0]` or `.sh.file`)
  - avoiding readonly global variable collisions on repeated sourcing
- `bin/ds_connector_update.sh` now resolves compartment context for connector
  name lookup when using `--datasafe-home`.
- `bin/ds_connector_update.sh` now accepts `--compartment` together with
  `--datasafe-home`.
- `bin/ds_connector_update.sh` keeps strict conflict handling for invalid mixes:
  `--datasafe-home` cannot be combined with `--connector` or `--connector-home`.
- `bin/ds_connector_update.sh` now uses this compartment resolution order:
  1. `--compartment`
  2. `DS_ROOT_COMP`
  3. `DS_CONNECTOR_COMP`

## Testing

```bash
# Targeted connector update tests
bats tests/script_ds_connector_update.bats -f "ds_connector_update.sh shows error when mixing --datasafe-home with --connector"
bats tests/script_ds_connector_update.bats -f "ds_connector_update.sh allows --datasafe-home with --compartment"
```

## Breaking Changes

None.

## See Also

- [Changelog](../../CHANGELOG.md)
- [Quick Reference](../quickref.md)
- [Standalone Usage](../standalone_usage.md)
