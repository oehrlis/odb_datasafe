# OraDBA Data Safe Extension v0.11.2

**Release Date:** 2026-02-16

## Overview

Version 0.11.2 delivers targeted fixes for connector bundle generation and
standalone shell initialization, plus new connector update check modes.

## Highlights

- **Fixed OCI bundle generation call** by including the required `--file`
  argument for connector configuration generation.
- **Added `--check-only` mode** in `ds_connector_update.sh` to run only version
  and update-availability checks without applying updates.
- **Added `--check-all` mode** in `ds_connector_update.sh` to check all
  `product=datasafe` connector entries from `oradba_homes.conf`.
- **Improved `ksh` compatibility** in `datasafe_env.sh` so
  `DATASAFE_SCRIPT_BIN` is reliably added to `PATH`.

## Details

### Added

- `bin/ds_connector_update.sh`
  - New `--check-only` option to run Step 0 (version check) and exit.
  - Skips password management, bundle generation/download, extraction, and setup update.
  - New `--check-all` option for batch version checks across all
    `product=datasafe` entries in `${ORADBA_BASE}/etc/oradba_homes.conf`.
  - Missing `(oci=...)` metadata in entries is reported as a warning and skipped.

### Fixed

- `lib/oci_helpers.sh`
  - `ds_generate_connector_bundle` now passes `--file` to
    `oci data-safe on-prem-connector generate-on-prem-connector-configuration`.
  - Prevents OCI CLI failure: `Error: Missing option(s) --file.`
- `bin/datasafe_env.sh`
  - Improved script-path resolution for `ksh` sourcing.
  - Added fallback resolution via `command -v` when only a command name is available.
  - Ensures `DATASAFE_SCRIPT_BIN` points to a valid directory before PATH updates.
  - Handles empty `PATH` safely when appending `DATASAFE_SCRIPT_BIN`.
- `bin/ds_connector_update.sh`
  - Usage/help text formatting cleaned for compartment and `--check-only` sections.

## Testing

```bash
# Connector update tests
bats tests/script_ds_connector_update.bats

# Syntax validation
bash -n bin/ds_connector_update.sh lib/oci_helpers.sh bin/datasafe_env.sh
```

## Breaking Changes

None.

## See Also

- [Changelog](../../CHANGELOG.md)
- [Quick Reference](../quickref.md)
- [Standalone Usage](../standalone_usage.md)
