# OraDBA Data Safe Extension v0.14.0

Release date: 2026-02-19

## Highlights

- Added consistent `-r/--filter` target-name regex support across list, refresh, and update scripts.
- Consolidated shared target collection and filter validation flow in `lib/oci_helpers.sh`.
- Completed two-phase refactor to remove duplicated target resolution/filter logic from key target scripts.

## What Changed

### Added

Introduced target-name regex filtering (`-r/--filter`) for the following scripts:

- `bin/ds_target_refresh.sh`
- `bin/ds_target_list.sh`
- `bin/ds_target_update_credentials.sh`
- `bin/ds_target_update_connector.sh`
- `bin/ds_target_update_tags.sh`

Added shared helper functions in `lib/oci_helpers.sh`:

- `ds_validate_target_filter_regex`
- `ds_filter_targets_json`
- `ds_collect_targets`

### Changed

Regex filter behavior is now aligned across the scripts above:

- Matching uses regex substring semantics against target display names.
- Combining `-T/--targets` with `-r/--filter` uses intersection behavior.
- Mutating scripts return exit code `1` when no targets match.
- `bin/ds_target_list.sh` reports no-match as an informational empty result.

Completed target-flow consolidation in two phases:

- **Phase 1**
  - `bin/ds_target_refresh.sh` and `bin/ds_target_list.sh` now use `ds_collect_targets`.
- **Phase 2**
  - `bin/ds_target_update_credentials.sh`, `bin/ds_target_update_connector.sh`,
    and `bin/ds_target_update_tags.sh` now use the same shared collection,
    regex validation, and no-match handling flow.

Additional improvement:

- `bin/ds_database_prereqs.sh` startup info now prints current `ORACLE_SID` (or `unset`) for clearer runtime context.

## Documentation Updates

Updated documentation for filter usage and behavior:

- `doc/index.md`
- `doc/quickref.md`

The docs now explicitly describe the list-vs-mutating no-match behavior.
